<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"> <!-- Fixes character rendering -->
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="header">
        <button id="tab-single" class="tab-btn active">Current Page</button>
        <button id="tab-queue" class="tab-btn">Queue <span id="queue-count">(0)</span></button>
        <div id="server-status" title="Checking Server..." class="status-dot pending"></div>
    </div>

    <!-- TAB 1: SINGLE -->
    <div id="view-single" class="tab-content active">
        <div class="input-group">
            <label>Title (Optional)</label>
            <input type="text" id="single-title" placeholder="Page Title">
        </div>
        <button id="btn-download-single" class="action-btn">Download Page</button>
    </div>

    <!-- TAB 2: QUEUE -->
    <div id="view-queue" class="tab-content">
        <div class="queue-actions">
            <button id="btn-add-tab" class="small-btn">+ Current</button>
            <div class="group-right">
                <button id="btn-add-selected" class="small-btn" title="Add Selected Tabs">+ Selected</button>
                <button id="btn-add-all" class="small-btn" title="Add All Tabs">+ All</button>
                <button id="btn-clear" class="small-btn text-red">Clear</button>
            </div>
        </div>

        <div class="input-group">
            <label>Queue (one URL per line)</label>
            <textarea id="queue-editor" class="queue-editor" placeholder="Paste or edit URLs..."></textarea>
            <div class="helper-text">Queue persists; edits update bundle queue.</div>
        </div>

        <div class="input-group">
            <label>Bundle Title</label>
            <input type="text" id="bundle-title" placeholder="e.g. Daily Read">
        </div>
        <button id="btn-download-bundle" class="action-btn">Download Bundle</button>
    </div>

    <!-- FOOTER: SETTINGS -->
    <div class="footer">
        <div class="col">
            <label><input type="checkbox" id="opt-nocomments"> No Comments</label>
            <label><input type="checkbox" id="opt-noarticle"> Comments Only</label>
        </div>
        <div class="col">
            <label><input type="checkbox" id="opt-noimages"> Text Only</label>
            <label><input type="checkbox" id="opt-archive"> Archive.org</label>
            <label><input type="checkbox" id="opt-summary" title="Requires API Key"> AI Summary</label>
        </div>
    </div>

    <div class="pagination-opt">
        <div class="input-group">
            <label>Forum Pages (e.g., 1,3-5)</label>
            <input type="text" id="opt-pages" placeholder="All pages">
        </div>
        <div class="input-group">
            <label>Max Pages</label>
            <input type="number" id="opt-maxpages" min="1" placeholder="Unlimited">
        </div>
    </div>

    <div class="cookie-opt">
        <label><input type="checkbox" id="opt-cookies"> Use site cookies (per-domain opt-in)</label>
        <label><input type="checkbox" id="opt-forum"> Force forum driver (for XenForo/threads)</label>
    </div>

    <div class="cancel-row">
        <button id="btn-cancel" class="small-btn text-red">Cancel Download</button>
        <button id="btn-options" class="small-btn" title="Keyboard shortcuts and settings">Keyboard Shortcuts</button>
    </div>

    <div id="status-bar"></div>
    <script src="chrome-shim.js"></script><script src="popup.js"></script>
</body>
</html>
